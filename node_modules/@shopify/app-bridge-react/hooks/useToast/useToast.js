"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useToast = exports.DEFAULT_TOAST_DURATION = void 0;
var react_1 = require("react");
var Toast_1 = require("@shopify/app-bridge/actions/Toast");
var useAppBridge_1 = require("../../useAppBridge");
exports.DEFAULT_TOAST_DURATION = 5000;
/**
 * useToast hook
 *
 * @remarks
 * React hook which wraps the Shopify App Bridge Toast action.
 *
 * @public
 */
function useToast() {
    var app = useAppBridge_1.useAppBridge();
    var toast;
    var show = react_1.useCallback(function (_a) {
        var message = _a.content, _b = _a.duration, duration = _b === void 0 ? exports.DEFAULT_TOAST_DURATION : _b, isError = _a.isError, onDismiss = _a.onDismiss;
        toast = Toast_1.create(app, {
            message: message,
            isError: isError,
            duration: duration,
        });
        toast.dispatch(Toast_1.Action.SHOW);
        if (onDismiss) {
            toast.subscribe(Toast_1.Action.CLEAR, onDismiss);
        }
    }, [app]);
    react_1.useEffect(function () {
        return function () {
            toast.unsubscribe();
        };
    }, []);
    return { show: show };
}
exports.useToast = useToast;
